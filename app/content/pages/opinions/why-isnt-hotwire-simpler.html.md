---
title: Hotwireはもっと簡単にならないのか？
layout: article
order: 50
published: true
---

## 本質的に複雑なものとの向き合い方

複雑さには[「必須の(Essential)複雑さ」と「付随的な(Accidental)複雑さ」](https://tech.uzabase.com/entry/2021/05/20/141950)があります。そして**必須の複雑さは「ユーザーの課題や要求から直接導き出せるもの」です**。

Hotwireの場合は、実現したいインタラクションが必須の複雑さです。そして[モーダルダイアログの例](http://localhost:3000/examples/modal/modal-show-with-animation#points-to-consider)でも示した通り、フロントエンドはいくつものインタラクションが同時並行で行われます。**フロントエンドは必須の複雑さが結構多い**のです。**私がモーダルダイアログを使うのを最小化するべきだというのも、必須の複雑さを減らすことが目的の一つです**。

## 必須の複雑さを閉じ込める方法

必須の複雑さを閉じ込める方法の一つは、頻繁に行われる操作をライブラリにしてしまうことです。いつも同じことをやるのであれば、これは非常に便利です

## ソフトウェア開発はカスタマイズが当たり前

ライブラリにしてしまう方法は魅力的ですが、一方でソフトウェア開発ではカスタマイズが当たり前です。ライブラリが想定した以外の使い方をしたくなるケースが必ず発生します。ライブラリを使うとかえって難しいことや、不可能なことが発生したりします。いわゆるLeaky Abstractionです。

## Railsの認証の例

Ruby on Railsは認証システムをどうするかという点において、leaky abstractionの課題に長くぶつかっていました。例えばDjangoやLaravelは、公式の認証システムが用意されています。Laravelはいくつも(Laravel Breeze, Fortify, Jetstream, Socialite, Sanctum, JWT Auth – 公式のものだけでもどれを選択するのに迷います)。Ruby on Railsには昔から[Deviseという有名な認証ライブラリ](https://github.com/heartcombo/devise)ものがあり、カスタマイズ性は高いのですが、それでもアプリケーションごとの多様な認証ニーズはカバーしきれず、不満を持っている人も多くいました。Ruby on Railsが公式の認証ライブラリを作らなかったのはこのためです。

そしてRuby on Rails version 8では公式の認証ライブラリは用意しませんでしたが、代わりに認証システムのscaffoldを用意しました。大枠のコードは自動生成させ、開発者がそれをカスタマイズするというやり方です。Elixirを発明したのJose Valim氏はDeviseの作者でもあるのですが、Elixirが公式に提供する認証も同じやり方をしていたと聞いています。

このようにLeaky abstractionの問題もあり、ライブラリを作れば良いという問題でもありません。

## Hotwireはもっと簡単にならないか？

Hotwireがライブラリ化の方向に向かうのかはまだ不明です。いくつかの試みはされていますが、まだ広く使われているものはありません。またReactの世界を見てもUIライブラリは多数ありますが、少しも落ち着きはありません。新しいものがコロコロと現れては消えていきます。そしてUIライブラリを使わないフロントエンド開発者も多いと聞いています。

認証と同様、フロントエンドの必須の複雑さは簡単には消えないのではないかと私は思います。結局要望が複雑で、ライブラリでまとめてしまうことが容易ではなさそうです。

そうであるならば、私たちは結局必須の複雑さからは逃れられません。必須の複雑さは受け止めて、しっかり理解できるようにすること。その上で付随的な複雑さはしっかり避けることが大事ではないかと思います。
