---
title: Stimulus ControllerはCSS classを変更するべきか？
layout: article
order: 005
published: true
---

Stimulus Controllerは原則としてステートをHTML要素の属性として持たせるが、属性も数種類ありので、どれを選択すれば良いか悩みます。

1. `data-*-values`: Stimulusが管理しますので、`*ValueChanged`コールバックが自動的に呼ばれます
2. `aria-*`: ウィジェットごとに規格で決められていますので、どのような意味があるのかがすぐにわかります。アクセシビリティ上必要とされていますので、当てにできます
3. CSS class: 直接表示に反映されますので、手間が省けます。Tailwindの場合は名前が決まっていますが、コード上の役割が不明確です。またBEMなどでCSSクラスの名前をつける場合は、上手に名前をつける必要があります

このうち、どれでステートを持つかを決めなければなりません。

Tailwind CSSを使っていると、扱わなければならないCSS classの数が増えてしまうため、またCSS class名に意味がないため、3番目の選択肢はあまり使わなくなるように思います。一方でBEMで名前をつけている場合は3番目も有効な選択肢でしょう。

とはいえ、やはり1番目か2番目の選択肢を使うことが多いです。

ステートを変えるアクションが複数ある場合、あるいはステートの変更が複数のHTML要素に影響を与える場合はStimulus Valuesをよく使います。Stimulus Valuesの下流で`aria-*`を変えることはあります。

一方で単純なステート管理で済む場合は、Stimulus Valuesを省略して、`aria-*`だけをステートにすることもあります。

またCSS classも単純でかつ適切な`aria-*`がない場合は、CSS classを直接変更することもあります。

このようにステートをどのようの持つべきかのルールはなく、かなり自由です。上記は私の経験に基づいたものですが、参考にしていただければと思います。
