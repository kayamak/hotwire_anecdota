---
title: Stimulus中のHTML生成を避ける理由
section: Background
layout: section
order: 010
---

## Hotwireは自主ルール

Stimulus Controllerの中でHTMLを生成することはできます。jQuery時代のように、JavaScriptコードで自在にHTMLは作れます。しかしそれを自主的に避けるのがHotwireの流儀です。

その理由を紹介します。

## ERBとの重複を避ける

Railsの世界ではまずERBを使ってサーバサイドでHTMLをレンダリングするのが大原則となります。サーバでのERBレンダリングが**主**です。同じHTMLをStimulusでも生成してしまうと、HTMLを２箇所で記述することになってしまいます。これだと同じコードを複製することになり、メンテナンス上の問題になりやすいです。

Stimulus Controllerの中でHTMLレンダリングをしないのはこのためです。

## StimulusでHTMLレンダリングをすることもある

もちろんStimulusでHTMLをレンダリングしたり、直接DOMを記述することは可能である。jQueryではこれは一般的に行われていましたし、軽量のJavaScriptテンプレートライブラリも昔から存在する。やろうと思えば問題なくできます。

しかしHotwireのそもそもの存在意義はフロントエンドを簡単に書けるようすることである。フロントエンドが複雑になってしまうような手法はHotwire的には非推奨になる。そこで一般的にはStimulusはCSSクラスの切り替えやHTML属性の変更、あるいは`textContent`のちょっとした書き換えに留めることが多い。

## Stimulusの中だけでHTMLレンダリングするなら問題ない

Hotwireで避けたいのはHTMLレンダリングのコードが重複してしまうことです。したがってサーバサイドでのレンダリングをやめて、クライアントサイドに完全に任せるなら問題ありません。実際、Stimulusの中でReact/JSXを書き、Stimulusのステートなどをpropsとして渡していくこともできます。

より一般的にはChart.jsなどを使って、StimulusでChart.js等にデータを渡すことは普通にやります。
